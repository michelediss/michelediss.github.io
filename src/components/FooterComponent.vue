<template>
  <footer class="flex justify-center fixed bottom-0 w-full left-0 z-50">
    <div
      class="shadow-lg backdrop-blur-sm bg-white/50 container flex justify-center py-4 items-center relative rounded-full inline-block w-auto mb-4">
      <!-- Icona Mail -->
      <a href="mailto:hello@michelepaolino.me" class="icon flex items-center px-8">
        <svg version="1.1" id="icon-mail" class="fill" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px" y="0px" viewBox="0 0 36.3 29" style="enable-background: new 0 0 36.3 29" xml:space="preserve">
          <path class="st0" d="M28.7,29H7.6c-2.2,0-3.5,0-4.6-0.6c-1-0.5-1.9-1.3-2.4-2.4C0,24.9,0,23.7,0,21.4V7.6c0-0.1,0-0.2,0-0.3
	c0,0,0,0,0-0.1c0-2,0-3.2,0.6-4.3c0.5-1,1.3-1.9,2.4-2.4C4.1,0,5.4,0,7.6,0h21.1c2.2,0,3.5,0,4.6,0.6c1,0.5,1.9,1.3,2.4,2.4
	c0.6,1.1,0.6,2.3,0.6,4.2c0,0,0,0,0,0.1c0,0.1,0,0.2,0,0.3v13.8c0,2.2,0,3.5-0.6,4.6c-0.5,1-1.3,1.9-2.4,2.4
	C32.2,29,30.9,29,28.7,29z M3.6,10.7v10.8c0,1.6,0,2.6,0.2,3C4,24.8,4.3,25,4.6,25.2c0.4,0.2,1.4,0.2,3,0.2h21.1c1.6,0,2.6,0,3-0.2
	c0.3-0.2,0.6-0.4,0.8-0.8c0.2-0.4,0.2-1.4,0.2-3V10.7l-7.1,4.7c-2.4,1.6-3.8,2.5-5.3,2.9c-1.4,0.3-2.8,0.3-4.2,0
	c-1.6-0.4-2.9-1.3-5.3-2.9L3.6,10.7z M3.6,6.3l9.1,6.1c2.1,1.4,3.2,2.1,4.2,2.4c0.8,0.2,1.7,0.2,2.5,0c0.9-0.2,2-0.9,4.2-2.4
	l9.1-6.1c0-0.8-0.1-1.4-0.2-1.7C32.3,4.3,32,4,31.7,3.8c-0.4-0.2-1.4-0.2-3-0.2H7.6c-1.6,0-2.6,0-3,0.2C4.3,4,4,4.3,3.8,4.6
	C3.7,4.9,3.6,5.5,3.6,6.3z" />
        </svg>
      </a>

      <!-- Icona Centrale -->
      <a href="https://github.com/michelediss?tab=repositories" target="_blank" class="icon flex items-center px-8">
        <svg version="1.1" id="Livello_1" class="fill" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px" y="0px" viewBox="0 0 32.1 32.1" style="enable-background: new 0 0 32.1 32.1" xml:space="preserve">
          <g class="st0">
            <path class="st1" d="M16,2.7C8.7,2.7,2.7,8.7,2.7,16s6,13.4,13.4,13.4s13.4-6,13.4-13.4S23.4,2.7,16,2.7z M0,16C0,7.2,7.2,0,16,0
		s16,7.2,16,16s-7.2,16-16,16S0,24.9,0,16z" />
            <path class="st1" d="M12.8,30.4c-0.1-0.2-0.1-1.7,0-4.5c-1.4,0-2.3,0-2.6-0.3c-0.5-0.4-1.1-1.5-1.6-2.3s-1.6-0.9-2-1.1
		c-0.4-0.2-0.5-0.9,1.2-0.3c1.7,0.5,1.8,2,2.4,2.4c0.6,0.3,1.9,0.2,2.5-0.1c0.6-0.3,0.6-1.3,0.7-1.7c0.1-0.4-0.3-0.5-0.4-0.5
		c-0.6,0-3.6-0.7-4.5-3.6c-0.8-3,0.2-4.9,0.8-5.7c0.4-0.6,0.4-1.7-0.1-3.6c1.6-0.2,2.9,0.3,3.8,1.6c0,0,1.2-0.7,3-0.7
		c1.9,0,2.5,0.6,3,0.7c0.5,0.1,0.9-2.2,4-1.6c-0.7,1.3-1.2,2.9-0.8,3.6c0.4,0.7,2.1,2.8,1.1,5.7c-0.7,2-2,3.2-4,3.6
		c-0.2,0.1-0.3,0.2-0.3,0.3c0,0.2,0.3,0.3,0.7,1.4c0.3,0.8,0.3,2.9,0.1,6.4c-0.6,0.2-1.1,0.3-1.5,0.3c-0.6,0.1-1.3,0.2-2,0.2
		c-0.7,0-0.9,0-1.8-0.1C14,30.6,13.4,30.5,12.8,30.4z" />
          </g>
        </svg>
      </a>

      <!-- Icona Messaggio -->
      <a href="https://www.linkedin.com/in/michele-paolino/" target="_blank" class="icon flex items-center px-8">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin fill" viewBox="0 0 16 16">
  <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
</svg>
      </a>

      <!-- Pulsante Hamburger Animato -->
      <button class="hamburger flex items-center px-7" @click="toggleMenu">
        <svg class="hamburger-icon fill" width="30px" height="30px" viewBox="2 0 12 12" enable-background="new 0 0 12 12"
          id="Слой_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink">
          <g>
            <rect class="line top" height="1" width="11" x="0.5" y="2.5" />
            <rect class="line middle"  height="1" width="11" x="0.5" y="5.5" />
            <rect class="line bottom"  height="1" width="11" x="0.5" y="8.5" />
          </g>
        </svg>
      </button>
    </div>
  </footer>

  <!-- Menu Full Screen -->
  <div ref="modal" class="menu-fullscreen fixed inset-0 bg-menu-color z-40">

    <header>
      <nav id="nav-back" class="flex pt-6 w-full lg:w-5/6 mx-auto">
        <div class="flex justify-center w-full">
          <div class="title-page-container">
            <h2 ref="title" class="title-page-text text-xl font-heading text-menu-color opacity-0">Menu</h2>
            <div ref="underline" class="title-page-underline h-0.5 bg-secondary-menu-color w-0"></div>
          </div>
        </div>
      </nav>
    </header>

    <div class="menu-content flex flex-col items-center justify-center h-full text-white pb-24">
      <ul class="text-center" ref="menuItems">
        <li class="font-heading my-10 menu-item-li">
          <div class="inline-block w-auto menu-item-wrapper">
            <router-link to="/" class="text-4xl md:text-5xl text-menu-color my-0" @click.native="toggleMenu">Home</router-link>
            <div class="w-0 h-1 bg-secondary-menu-color menu-item-line"></div>
          </div>
        </li>
        <li class="font-heading my-10 menu-item-li">
          <div class="inline-block w-auto menu-item-wrapper">
          <router-link to="/portfolio" class="text-4xl md:text-5xl text-menu-color my-0" @click.native="toggleMenu">Portfolio</router-link>
          <div class="w-0 h-1 bg-secondary-menu-color menu-item-line"></div>
        </div>

        </li>
        <li class="font-heading my-10 menu-item-li">
          <div class="inline-block w-auto menu-item-wrapper">
          <router-link to="/resume" class="text-4xl md:text-5xl text-menu-color my-0" @click.native="toggleMenu">Resume</router-link>
          <div class="w-0 h-1 bg-secondary-menu-color menu-item-line"></div>
        </div>

        </li>
        <li class="font-heading my-10 menu-item-li">
          <div class="inline-block w-auto menu-item-wrapper">
          <router-link to="/vision" class="text-4xl md:text-5xl text-menu-color my-0" @click.native="toggleMenu">Vision</router-link>
          <div class="w-0 h-1 bg-secondary-menu-color menu-item-line"></div>
        </div>

        </li>
      </ul>
    </div>
  </div>
</template>


<script>
import { gsap } from "gsap";

export default {
  name: "FooterComponent",
  data() {
    return {
      isModalOpen: false,
    };
  },
  methods: {
    toggleMenu() {
      this.isModalOpen = !this.isModalOpen;

      if (this.isModalOpen) {
        document.querySelector('.hamburger-icon').classList.add('is-open');
        document.body.classList.add('no-scroll'); // Aggiungi classe per disabilitare lo scroll

        // Animazione di apertura del menu con slide down
        gsap.fromTo(
          this.$refs.modal,
          { y: '-100%' },  // Inizia fuori dallo schermo in alto
          { y: '0%', duration: 0.5, ease: "power2.out", onComplete: () => this.animateTitleAndUnderline() }  // Scivola verso il basso e chiama la funzione per animare il titolo
        );

        gsap.fromTo(
          this.$refs.menuItems.children,
          { x: -50, opacity: 0 },
          { x: 0, opacity: 1, duration: 0.5, delay: 0.5, stagger: 0.2, ease: "power2.out" }
        );

      } else {
        document.querySelector('.hamburger-icon').classList.remove('is-open');
        document.body.classList.remove('no-scroll'); // Rimuovi classe per abilitare lo scroll

        // Animazione di chiusura del menu con slide up
        gsap.to(this.$refs.modal, {
          y: '-100%', // Scivola verso l'alto fuori dallo schermo
          duration: 0.5,
          ease: "power1.in",
          onComplete: () => this.resetTitleAndUnderline() // Resetta le animazioni
        });
      }
    },
    animateTitleAndUnderline() {
      // Animazione per il titolo
      gsap.fromTo(
        this.$refs.title,
        { opacity: 0 },
        { opacity: 1, duration: 0.5, ease: "power2.out" }
      );

      // Animazione per l'underline contemporanea al fadeIn del titolo
      gsap.fromTo(
        this.$refs.underline,
        { width: 0 },  // Inizia con larghezza 0
        { width: '100%', duration: 0.5, ease: "power2.out" }  // Espande la larghezza a 100%
      );
    },
    resetTitleAndUnderline() {
      // Resetta le proprietà del titolo e dell'underline
      gsap.set(this.$refs.title, { opacity: 0 });
      gsap.set(this.$refs.underline, { width: 0 });
    }
  },
};
</script>

<style scoped>


.icon svg {
  height: auto;
  width: 1.8rem;
}

.hamburger-icon {
  cursor: pointer;
  transition: transform 0.5s ease;
}

.line {
  transition: transform 0.4s ease, opacity 0.4s ease;
  transform-origin: center;
}

.is-open .line.top {
  transform: translateY(2px) rotate(45deg);
}

.is-open .line.middle {
  opacity: 0;
}

.is-open .line.bottom {
  transform: translateY(-2px) rotate(-45deg);
}

/* CSS per il menu full screen */
.menu-fullscreen {
  display: flex;
  /* Manteniamo display flex per GSAP */
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: fixed;
  inset: 0;
  transform: translateY(-100%);
}

.menu-content {
  text-align: center;
}

.menu-item-wrapper {
  .menu-item-line {
    transition: 0.3s;
  }
}
.menu-item-wrapper:hover {
  .menu-item-line {
    width: 100%;
  }
}
.title-page-underline {
  width: 0; 
}
</style>

